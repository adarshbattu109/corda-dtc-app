<!DOCTYPE HTML>
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
    <META content="IE=11.0000"
          http-equiv="X-UA-Compatible">
    <TITLE>User Registration</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8"><!-- jQuery -->

    <SCRIPT src="js/jquery-1.10.1.min.js"></SCRIPT>

    <SCRIPT src="js/jquery-migrate-1.2.1.min.js"></SCRIPT>

    <SCRIPT src="js/jquery-ui.js"></SCRIPT>

    <SCRIPT src="js/grid.locale-en.js"></SCRIPT>

    <SCRIPT src="js/jquery.jqGrid.min.js"></SCRIPT>

    <SCRIPT src="js/custom.js"></SCRIPT>
    <!-- jquery-ui CSS -->
    <LINK href="css/jquery-ui.css"
          rel="stylesheet">     <!-- Bootstrap core CSS -->
    <LINK href="css/bootstrap.min.css"
          rel="stylesheet">
    <LINK href="css/ui.jqgrid.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <STYLE type="text/css">
        .row {
            padding-bottom: 7px;
        }
    </STYLE>
    <LINK href="css/jqGrid.bootstrap.css" rel="stylesheet">
    <LINK href="css/Custom.css" rel="stylesheet">
</HEAD>
<BODY>
    <FORM id="form1" method="post">
        <div class="busyStatus" id="divBusyStatus" style="text-align: center">
            <div id="yourdiv" style="display: inline-block;">
                <div class="loader">
                </div>
            </div>
            <h2>Please wait...</h2>
        </div>
        <DIV class="container" style="width: 75%; margin-top:5px; ">
            <DIV id="content">
                <DIV class="form-horizontal">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-md-6"><h4>Create an Account</h4></div>
                                <div class="col-md-6"><span class="pull-right"><label id="lblBankTitle"></label></span></div>
                            </div>
                        </div>
                    </div>
                    <DIV class="panel">
                        <DIV class="panel panel-info" id="divOrderDetailsContainer">
                            <div class="well well-sm">Personal Information</div>
                            <DIV class="panel-body" style="margin-bottom:15px;">
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtFirstName">First Name:</LABEL>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="txtFirstName" placeholder="First Name">
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <label class="control-label col-sm-2" for="txtLastName">Last Name:</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="text" id="txtLastName" placeholder="Last Name" />
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtDateofBirth">Date of Birth:</LABEL>
                                    <div class="col-sm-2">
                                        <input class="form-control" placeholder="YYYY/MM/DD" id="txtDateofBirth" />
                                    </div>
                                    <label class="control-label col-sm-2" for="ddlGender">Gender:</label>
                                    <div class="col-sm-2">
                                        <SELECT class="form-control" id="ddlGender">
                                            <OPTION>-- Select --</OPTION>
                                            <OPTION>Male</OPTION>
                                            <OPTION>Female</OPTION>
                                        </SELECT>
                                    </div>
                                </DIV>
                            </DIV>

                            <div class="well well-sm">Contact Details</div>
                            <DIV class="panel-body" style="margin-bottom:15px;">
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtAddress1">Address 1:</LABEL>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="text" placeholder="Address 1" id="txtAddress1" />
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtAddress2">Address 2:</LABEL>
                                    <div class="col-sm-6">
                                        <input class="form-control" placeholder="Address 2" type="text" id="txtAddress2" />
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtCity">City:</LABEL>
                                    <div class="col-sm-2">
                                        <input class="form-control" type="text" placeholder="City" id="txtCity" />
                                    </div>
                                    <LABEL class="control-label col-sm-2" for="txtPostalCode">Postal Code:</LABEL>
                                    <div class="col-sm-2">
                                        <input class="form-control" type="text" placeholder="Postal Code" id="txtPostalCode" />
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtState">State:</LABEL>
                                    <div class="col-sm-2">
                                        <input class="form-control" type="text" placeholder="State" id="txtState" />
                                    </div>
                                    <LABEL class="control-label col-sm-2" for="txtCountry">Country:</LABEL>
                                    <div class="col-sm-2">
                                        <input class="form-control" type="text" placeholder="Country" id="txtCountry" />
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtEmail">Email:</LABEL>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="email" placeholder="e.g. yourname@dtc.com" id="txtEmail" />
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtMobile">Mobile:</LABEL>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="text" placeholder="e.g. +91 9879146824" id="txtMobile" />
                                    </div>
                                </DIV>
                            </DIV>

                            <div class="well well-sm">User Credentials</div>
                            <DIV class="panel-body" style="margin-bottom:15px;">
                                <DIV class="form-group">
                                    <LABEL class="control-label col-sm-2" for="txtUsername">Username:</LABEL>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="txtUsername" placeholder="Username">
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <label class="control-label col-sm-2" for="txtPassword">Password:</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="password" id="txtPassword" placeholder="Password" />
                                    </div>
                                </DIV>
                                <DIV class="form-group">
                                    <label class="control-label col-sm-2" for="txtConfirmPassword">Confirm Password:</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" type="password" id="txtConfirmPassword" placeholder="Confirm Password" />
                                    </div>
                                </DIV>
                            </DIV>

                        </DIV>
                    </DIV>
                    <DIV class="panel">
                        <DIV class="form-group">
                            <LABEL class="control-label col-sm-2" for="txtUsername"></LABEL>
                            <div class="col-sm-6">
                                <BUTTON class="btn btn-info " id="btnSave">Save</BUTTON>
                                <BUTTON class="btn btn-info" id="btnClose">Cancel</BUTTON>
                            </div>
                        </DIV>
                    </DIV>
                </DIV>
            </DIV>
        </DIV>
        <SCRIPT type="text/javascript">

            //var userID = "abc123";
            var userID = getQueryStringValue("userID");
            $(document).ready(function () {
                setBankTitle();
                // Setup grid
                $("#btnSave").click(function (e) {
                    $.ajax({
                        type: "PUT",
                        url: "http://localhost:10005/api/dtc/NodeB/create-purchase-order",
                        dataType: "json",
                        contentType: "application/json;charset=UTF-8",
                        data: newUser, //objOrder will be parameter name in service.
                        beforeSend: function () {
                            $("#divBusyStatus").show();
                        },
                        complete: function () {
                            $("#divBusyStatus").hide();
                        },
                        success: function (data) {
                            alert('Success');
                            window.location = "OrderList.htm?userID=" + userID;
                        },
                        error: function (errMsg) {
                            debugger;
                            //alert(errMsg);
                            //redirectUser("OrderList.htm?userID=" + userID);
                            window.location = "OrderList.htm?userID=" + userID;
                        }
                    });
                });
                var newUser = new Object();
                function getUserFromInputs() {
                    newUser = new Object();
                    newUser.firstName = $("#txtFirstName").val();
                    newUser.lastName = $("#txtLastName").val();
                    newUser.dateofBirth = $("#txtDateofBirth").val();
                    newUser.gender = $("#txtGender").val();

                    newUser.address.address1 = $("#txtAddress1").val();
                    newUser.address.address2 = $("#txtAddress2").val();
                    newUser.address.city = $("#txtCity").val();
                    newUser.address.postalCode = $("#txtPostalCode").val();
                    newUser.address.state = $("#txtState").val();
                    newUser.address.country = $("#txtCountry").val();
                    newUser.address.email = $("#txtEmail").val();
                    newUser.address.mobile = $("#txtMobile").val();

                    newUser.username = $("#txtUsername").val();
                    newUser.password = $("#txtPassword").val();
                }
                function setBankTitle() {
                    //$("#lblBankTitle").text("Welcome to Bank of DTH");
                    $.ajax({
                        type: "GET",
                        url: "http://localhost:10005/api/dtc/me",
                        dataType: "json",
                        contentType: "application/json;charset=UTF-8",
                        data: newUser, //objOrder will be parameter name in service.
                        beforeSend: function () {
                            $("#divBusyStatus").show();
                        },
                        complete: function () {
                            $("#divBusyStatus").hide();
                        },
                        success: function (data) {
                        	debugger;
                            $("#lblBankTitle").text(data.me);
                        },
                        error: function (errMsg) {
                            debugger;
                            //alert(errMsg);
                            //redirectUser("OrderList.htm?userID=" + userID);
                            //window.location = "OrderList.htm?userID=" + userID;
                        }
                    });
                }
                $("#divBusyStatus").hide();
                $("#txtDateofBirth").datepicker({
                    dateFormat: 'yy-mm-dd',
                    minDate: new Date()
                });
            });
        </SCRIPT>
    </FORM>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <SCRIPT src="js/bootstrap.min.js"></SCRIPT>
    <!-- Visual Studio Browser Link -->
    <!-- End Browser Link -->
</BODY>
</HTML>